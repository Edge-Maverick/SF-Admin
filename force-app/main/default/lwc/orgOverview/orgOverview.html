<template>
    <lightning-card title="Organization Overview" icon-name="standard:topic">
        <div slot="actions">
            <lightning-badge label={orgTypeLabel} icon-name="utility:connected_apps"></lightning-badge>
        </div>
        
        <div class="slds-var-p-horizontal_medium">
            <!-- Collapsible Details Section -->
            <div class={contentClass}>
                <template if:true={orgDetails}>
                    <lightning-layout multiple-rows>
                        <lightning-layout-item size="6" padding="around-small">
                            <div class="slds-media slds-media_center">
                                <div class="slds-media__figure">
                                    <lightning-icon icon-name="standard:account" size="small" variant="inverse" class="icon-container"></lightning-icon>
                                </div>
                                <div class="slds-media__body">
                                    <p class="slds-text-title_caps slds-text-color_weak">Name</p>
                                    <p class="slds-text-heading_small">{orgDetails.Name}</p>
                                </div>
                            </div>
                        </lightning-layout-item>
                        <lightning-layout-item size="6" padding="around-small">
                            <div class="slds-media slds-media_center">
                                <div class="slds-media__figure">
                                    <lightning-icon icon-name="standard:identifier" size="small" variant="inverse" class="icon-container"></lightning-icon>
                                </div>
                                <div class="slds-media__body">
                                    <p class="slds-text-title_caps slds-text-color_weak">Org Id</p>
                                    <p class="slds-text-heading_small">{orgDetails.Id}</p>
                                </div>
                            </div>
                        </lightning-layout-item>
                        <lightning-layout-item size="6" padding="around-small">
                            <div class="slds-media slds-media_center">
                                <div class="slds-media__figure">
                                    <lightning-icon icon-name="standard:server" size="small" variant="inverse" class="icon-container"></lightning-icon>
                                </div>
                                <div class="slds-media__body">
                                    <p class="slds-text-title_caps slds-text-color_weak">Instance</p>
                                    <p class="slds-text-heading_small">{orgDetails.InstanceName}</p>
                                </div>
                            </div>
                        </lightning-layout-item>
                        <lightning-layout-item size="6" padding="around-small">
                            <div class="slds-media slds-media_center">
                                <div class="slds-media__figure">
                                    <lightning-icon icon-name="standard:code_playground" size="small" variant="inverse" class="icon-container"></lightning-icon>
                                </div>
                                <div class="slds-media__body">
                                    <p class="slds-text-title_caps slds-text-color_weak">Sandbox</p>
                                    <p class="slds-text-heading_small">
                                        <lightning-badge label={sandboxLabel} class={sandboxBadgeClass}></lightning-badge>
                                    </p>
                                </div>
                            </div>
                        </lightning-layout-item>
                    </lightning-layout>
                </template>
                
                <template if:true={error}>
                     <div class="slds-notify slds-notify_alert slds-theme_alert-texture slds-theme_error" role="alert">
                        <span class="slds-assistive-text">error</span>
                        <h2>Error retrieving data</h2>
                    </div>
                </template>

                <template if:true={releaseInfo}>
                    <div class="slds-var-m-top_medium slds-box slds-box_x-small slds-theme_shade">
                        <lightning-layout vertical-align="center">
                            <lightning-layout-item padding="around-small">
                                <lightning-icon icon-name="custom:custom19" size="medium"></lightning-icon>
                            </lightning-layout-item>
                            <lightning-layout-item padding="around-small" flexibility="grow">
                                <p class="slds-text-title_caps">Upcoming Release</p>
                                <h3 class="slds-text-heading_small"><strong>{releaseInfo.name}</strong></h3>
                                <p>Scheduled for: <lightning-formatted-date-time value={releaseInfo.releaseDate}></lightning-formatted-date-time></p>
                            </lightning-layout-item>
                            <lightning-layout-item padding="around-small">
                                <div class="days-remaining-badge">
                                    <span class="days-count">{releaseInfo.daysRemaining}</span>
                                    <span class="days-label">Days</span>
                                </div>
                            </lightning-layout-item>
                        </lightning-layout>
                    </div>
                </template>
            </div>

            <!-- Toggle Button -->
            <div class="slds-align_absolute-center slds-var-m-vertical_small">
                <lightning-button-icon 
                    icon-name={iconName} 
                    alternative-text={buttonLabel} 
                    title={buttonLabel}
                    variant="border-filled" 
                    onclick={toggleContent}
                    aria-expanded={isContentVisible}>
                </lightning-button-icon>
            </div>

            <!-- Main Content (Always Visible) -->
            <div class="slds-box slds-theme_default main-summary-box">
                <h2 class="slds-text-heading_small slds-var-m-bottom_small slds-border_bottom slds-var-p-bottom_x-small">
                    <lightning-icon icon-name="utility:chart" size="x-small" class="slds-var-m-right_x-small"></lightning-icon>
                    Quick Stats
                </h2>
                <lightning-layout multiple-rows>
                    <lightning-layout-item size="12" small-device-size="6" medium-device-size="3" padding="around-small">
                        <div class="stat-item">
                            <p class="stat-label">Limits Usage</p>
                            <p class="stat-value">78%</p>
                        </div>
                    </lightning-layout-item>
                    <lightning-layout-item size="12" small-device-size="6" medium-device-size="3" padding="around-small">
                        <div class="stat-item">
                            <p class="stat-label">Active Users</p>
                            <p class="stat-value">1,240</p>
                        </div>
                    </lightning-layout-item>
                    <lightning-layout-item size="12" small-device-size="6" medium-device-size="3" padding="around-small">
                        <div class="stat-item">
                            <p class="stat-label">Trust Status</p>
                            <p class="stat-value slds-text-color_success">OK</p>
                        </div>
                    </lightning-layout-item>
                    <lightning-layout-item size="12" small-device-size="6" medium-device-size="3" padding="around-small">
                        <div class="stat-item">
                            <p class="stat-label">Readiness</p>
                            <p class="stat-value">Good</p>
                        </div>
                    </lightning-layout-item>
                </lightning-layout>
            </div>

            <!--  FOOTER FOR QUICK LAUNCH -->
            <div class="slds-box slds-theme_default main-summary-box ">
                <h2 class="slds-text-heading_small slds-var-m-bottom_small slds-border_bottom slds-var-p-bottom_x-small">
                    <lightning-icon icon-name="utility:link" size="x-small" class="slds-var-m-right_x-small"></lightning-icon>
                    Quick Launch
                </h2>
                <lightning-layout multiple-rows vertical-align="center" horizontal-align="center" pull-to-boundary="large">
                    <template if:true={quickLaunchItems}>
                        <template for:each={quickLaunchItems} for:item="item">
                            <lightning-layout-item key={item.Name} size="3" small-device-size="6" medium-device-size="3" large-device-size="2" padding="around-small">
                                <div class="slds-visual-picker slds-visual-picker_small">
                                    
                                    <label for="visual-picker-94">
                                        <span class="slds-visual-picker__figure slds-visual-picker__icon slds-align_absolute-center">
                                        <span class="slds-is-selected">
                                            <span class="slds-icon_container">
                                            <svg class="slds-icon slds-icon_large slds-icon-action-check" aria-hidden="true">
                                                <use xlink:href="/assets/icons/action-sprite/svg/symbols.svg#check"></use>
                                            </svg>
                                            </span>
                                        </span>
                                        <span class="slds-is-not-selected">
                                            <span class="slds-icon_container">
                                            <!--svg class="slds-icon slds-icon-standard-account slds-icon_large" aria-hidden="true">
                                                <use xlink:href="/assets/icons/standard-sprite/svg/symbols.svg#account"></use>
                                            </svg-->
                                            <lightning-icon icon-name={item.icon} size="large"></lightning-icon>
                                            </span>
                                        </span>
                                        </span>
                                        <span class="slds-visual-picker__body">
                                        <span class="slds-text-title">{item.label}</span>
                                        </span>
                                    </label>
                                </div>
                            </lightning-layout-item>
                        </template>
                    </template>
                    
                </lightning-layout>
            </div>
        </div>
    </lightning-card>
</template>