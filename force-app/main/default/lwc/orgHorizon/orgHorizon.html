<template>
    <template lwc:if={hasAllAdminPermission}>
    <div class="org-horizon-main">
                <div class="navigation-container">
                <div class="slds-var-p-around_small">
                    <!--strong class="slds-text-heading_small" style="color:#bc876d">Hello! <strong style="color:#bb673e;font-size:24px"> {userName}</strong>  </strong>
                    <div class="padding:0;margin:0;"><strong class="" style="color:#bc876d;font-size:5px;padding:0;margin:0;">ADMIN101.ADMIN101.ADMIN101.ADMIN101.ADMIN101.ADMIN101</strong></div-->
                    <div class="navigation-highlight">
                        <template lwc:if={currentOrgInfo}>
                            <div class={cardClass}>
                                <div class={innerClass} onclick={handleCardClick}>
                                    <!-- FRONT FACE -->
                                    <div class="card-front">
                                        <div class="card-glow"></div>
                                        <div class="card-content">
                                            <div class="card-top">
                                                <div class="header-group">
                                                    <div class="release-info">
                                                        <div class="current-release">{currentReleaseVersion}</div>
                                                        <template lwc:if={nextReleaseDays}>
                                                            <div class="upcoming-release">
                                                                <span class="days-count">{nextReleaseDays} Days</span> to {nextReleaseName}
                                                            </div>
                                                        </template>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <div class="org-name-section slds-truncate" title={currentOrgInfo.Name}>
                                                {currentOrgInfo.Name}
                                            </div>

                                            <div class="org-id-row slds-grid slds-grid_vertical-align-center">
                                                <span class="org-id-mono">{orgId}</span>
                                                <lightning-button-icon icon-name="utility:copy" size="xx-small" onclick={copyOrgId} variant="bare" class="copy-btn"></lightning-button-icon>
                                            </div>

                                            <div class="card-bottom">
                                                <div class="status-group slds-grid slds-grid_vertical-align-center">
                                                    <template lwc:if={isProduction}>
                                                        <span class="holo-sticker production">PROD</span>
                                                    </template>
                                                    <template lwc:else>
                                                        <span class="holo-sticker sandbox">SANDBOX</span>
                                                    </template>
                                                    <span class={pulseClass}></span>
                                                </div>
                                                <div class="qr-code"></div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- BACK FACE -->
                                    <div class="card-back">
                                        <div class="card-content slds-text-align_center slds-grid slds-grid_vertical slds-grid_align-center">
                                            <h3 class="back-title">ORG DETAILS</h3>
                                            <p class="back-label">API VER</p>
                                            <p class="back-value">{apiVersion}</p>
                                            
                                            <div class="slds-var-m-top_small">
                                                <button class="slds-button slds-button_neutral switch-btn">Switch Org</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </template>
                        <template lwc:else>
                            <div class="slds-align_absolute-center slds-p-vertical_small">
                                <lightning-spinner alternative-text="Loading" size="small" variant="brand"></lightning-spinner>
                            </div>
                        </template>
                    </div>
                </div>
                <lightning-vertical-navigation selected-item={currentContent} onselect={handleSelect} class="navigation">
                    
                    <lightning-vertical-navigation-item-icon label="Org Overview" name="org_overview" icon-name="utility:home"></lightning-vertical-navigation-item-icon>
                    <lightning-vertical-navigation-item label="Licence Utilization" name="licence_utilization"></lightning-vertical-navigation-item>
                    <lightning-vertical-navigation-item label="User Adoption" name="user_adoption"></lightning-vertical-navigation-item>
                    <lightning-vertical-navigation-item label="Login Forensics" name="login_forensics"></lightning-vertical-navigation-item>
                    <lightning-vertical-navigation-item label="Setup Audit Trail" name="setup_audit_trail"></lightning-vertical-navigation-item>
                    <lightning-vertical-navigation-item-icon label="Technical Health" name="techincal_health" icon-name="utility:heart"></lightning-vertical-navigation-item-icon>
                    <lightning-vertical-navigation-item-icon label="Optimizer" name="optimizer" icon-name="utility:strategy"></lightning-vertical-navigation-item-icon>
                    <template lwc:if={isProduction}>
                        <lightning-vertical-navigation-item-icon label="Sandbox" name="sandbox_overview" icon-name="utility:dx_org_test"></lightning-vertical-navigation-item-icon>
                    </template>
                    <hr style="margin-top:5px; margin-bottom:10px"></hr>
                    <lightning-vertical-navigation-section label="Launch Pad">
                        <lightning-vertical-navigation-item-icon label="Help (package)" name="help" icon-name="utility:help_doc_ext"></lightning-vertical-navigation-item-icon>
                        <lightning-vertical-navigation-item-icon label="Trust & Status" name="trust_status" icon-name="utility:world" href="https://trust.salesforce.com/"></lightning-vertical-navigation-item-icon>
                        <lightning-vertical-navigation-item-icon label="Salesforce Go" name="folders_created" icon-name="utility:tour_check"></lightning-vertical-navigation-item-icon>
                    </lightning-vertical-navigation-section>
                    <hr style="margin-top:5px; margin-bottom:10px"></hr>
                    <lightning-vertical-navigation-item-icon label="Settings" name="settings" icon-name="utility:automate"></lightning-vertical-navigation-item-icon>
                </lightning-vertical-navigation>
                {currentContent}
                </div>
                <div class="content-container">
                    <!-- START :: MAIN CONTENT HOLDER -->
                    <template lwc:if={showOrgOverview}>
                        <c-org-overview></c-org-overview>
                    </template>
                    <template lwc:elseif={showLicenceUtilization}>
                        <c-license-utilization></c-license-utilization>
                        <c-license-utilization-v2></c-license-utilization-v2>
                    </template>
                    <template lwc:elseif={showSetupAuditTrail}>
                        <c-setup-audit-trail-viewer></c-setup-audit-trail-viewer>
                    </template>
                    <template lwc:elseif={showTechincalHealth}>
                        <c-techincal-health></c-techincal-health>
                    </template>
                    <template lwc:elseif={showOptimizer}>
                        <c-optimizer></c-optimizer>
                    </template>
                    <template lwc:else>
                        Select a Proper Navigation option.
                    </template>
                    <!-- END :: MAIN CONTENT HOLDER -->
                </div>
    </div>
    </template>
    <template lwc:else>
        <div class="demo-only" style="height:24rem">
        <section role="dialog" tabindex="0" aria-modal="true" aria-labelledby="prompt-heading-id" aria-describedby="prompt-message-wrapper" class="slds-modal slds-fade-in-open slds-modal_prompt">
        <div class="slds-modal__container">
        <div class="slds-modal__header slds-theme_error slds-theme_alert-texture">
        <h1 class="slds-text-heading_medium" id="prompt-heading-id">Service Unavailable</h1>
        </div>
        <div class="slds-modal__content slds-p-around_medium" id="prompt-message-wrapper">
        <p>There is someissue with the confiiuration or permissions please reach out to your org System Administrator</p>
        <ul class="slds-list_dotted">
            <li>- The current user does not have the right permission.</li>
            <li>Check for open issue here..</li>
            <li>List Item</li>
        </ul>
        </div>
        <div class="slds-modal__footer slds-theme_default">
        <!--button class="slds-button slds-button_neutral">Got It</button-->
        </div>
        </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
        </div>
    </template>
</template>